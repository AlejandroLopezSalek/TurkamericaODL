<!-- universal-lesson-modal.njk -->
<div id="universalLessonModal" class="modal hidden fixed inset-0 z-[9999] flex items-center justify-center bg-black/80 backdrop-blur-sm p-4 animate-fadeIn">
    <div class="modal-content bg-white dark:bg-slate-800 rounded-2xl w-11/12 max-w-7xl h-auto max-h-[85vh] flex flex-col shadow-2xl ring-1 ring-slate-900/5 dark:ring-slate-100/10 overflow-hidden relative z-[10000] animate-scaleIn">
        
        <!-- Header -->
        <div class="modal-header bg-gradient-to-r from-blue-600 to-blue-700 p-4 sm:p-5 flex justify-between items-center text-white shrink-0 shadow-md transform-gpu">
            <h3 id="universalModalTitle" class="text-xl sm:text-2xl font-bold m-0 text-white tracking-wide">
                <!-- Title Injected by JS -->
            </h3>
            <div class="flex items-center gap-2">
                <!-- Edit Button (Optional, injected by JS) -->
                <div id="universalModalActions"></div>
                
                <button class="close-modal bg-white/10 hover:bg-white/20 text-white w-10 h-10 rounded-xl flex items-center justify-center transition-all duration-300 hover:rotate-90 hover:scale-105 active:scale-95" id="closeUniversalModalBtn" aria-label="Cerrar">
                    <i class="fas fa-times text-lg"></i>
                </button>
            </div>
        </div>

        <!-- Body -->
        <div class="modal-body p-6 sm:p-8 overflow-y-auto text-slate-700 dark:text-slate-300 custom-scrollbar flex-1 bg-slate-50/50 dark:bg-slate-900/50">
            <div id="universalModalContent" class="prose prose-lg dark:prose-invert max-w-none leading-relaxed">
                <!-- Content Injected by JS -->
            </div>
        </div>
        
    </div>
</div>
